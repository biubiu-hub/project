"use strict";!function(s){var i=location.search.substring(1).split("=")[1],n=s("#smallpic"),e=s("#bpic"),l=s(".loadtitle"),c=s(".miaoshu"),a=s(".loadpcp");i=i||1,s.ajax({url:"http://localhost/NZ_1903/project/php/getsid.php",data:{sid:i},dataType:"json"}).done(function(i){n.attr("src",i.url),n.attr("sid",i.sid),e.attr("src",i.url),l.html(i.title),c.html(i.miaoshu),a.html(i.price);var t=i.ullist.split(","),o="";s.each(t,function(i,t){o+='<li><img src="'+t+'"/></li>'}),s("#list ul").html(o)});var r=s("#spic"),h=s("#sf"),t=s("#bf"),o=s("#left"),d=s("#right");s("#list");h.width(r.width()*t.width()/e.width()),h.height(r.height()*t.height()/e.height());var f=e.width()/r.width();r.hover(function(){h.css("visibility","visible"),t.css("visibility","visible"),s(this).on("mousemove",function(i){var t=i.pageX-s(".goodsinfo").offset().left-h.width()/2,o=i.pageY-s(".goodsinfo").offset().top-h.height()/2;t<0?t=0:t>=r.width()-h.width()&&(t=r.width()-h.width()),o<0?o=0:o>=r.height()-h.height()&&(o=r.height()-h.height()),h.css({left:t,top:o}),e.css({left:-t*f,top:-o*f})})},function(){h.css("visibility","hidden"),t.css("visibility","hidden")}),s("#list ul").on("click","li",function(){var i=s(this).find("img").attr("src");n.attr("src",i),e.attr("src",i)});var u=6;d.on("click",function(){var i=s("#list ul li");i.size()>u&&(u++,o.css("color","#333"),i.size()==u&&d.css("color","#fff"),s("#list ul").animate({left:-(u-6)*i.eq(0).outerWidth(!0)}))}),o.on("click",function(){var i=s("#list ul li");6<u&&(u--,d.css("color","#333"),u<=6&&o.css("color","#fff"),s("#list ul").animate({left:-(u-6)*i.eq(0).outerWidth(!0)}))}),s(".add").on("click",function(){var i=s(this).parents(".goodsinfo-word").find(".p-btn input").val();i++,s(this).parents(".goodsinfo-word").find(".p-btn input").val(i)}),s(".lose").on("click",function(){var i=s(this).parents(".goodsinfo-word").find(".p-btn input").val();--i<1&&(i=1),s(this).parents(".goodsinfo-word").find(".p-btn input").val(i)}),s(".p-btn input").on("input",function(){var i=s(this).val();/^\d+$/g.test(i)||s(this).val(1)});var p=[],v=[];s(".join .joincart").on("click",function(){var i=s(this).parents(".goodsinfo").find("#smallpic").attr("sid");if(v=jscookie.get("cookiesid")&&jscookie.get("cookienum")?(p=jscookie.get("cookiesid").split(","),jscookie.get("cookienum").split(",")):(p=[],[]),-1!=s.inArray(i,p)){var t=parseInt(v[s.inArray(i,p)])+parseInt(s("#count").val());v[s.inArray(i,p)]=t,jscookie.add("cookienum",v,10)}else p.push(i),jscookie.add("cookiesid",p,10),v.push(s("#count").val()),jscookie.add("cookienum",v,10);alert("加入购物车成功")})}(jQuery);