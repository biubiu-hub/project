"use strict";!function(o){var i=location.search.substring(1).split("=")[1],e=o("#smallpic"),c=o("#bpic"),l=o(".loadtitle"),a=o(".miaoshu"),h=o(".loadpcp");i=i||1,o.ajax({url:"http://localhost/NZ_1903/project/php/getsid.php",data:{sid:i},dataType:"json"}).done(function(i){e.attr("src",i.url),e.attr("sid",i.sid),c.attr("src",i.url),l.html(i.title),a.html(i.miaoshu),h.html(i.price);var t=i.ullist.split(","),s="";o.each(t,function(i,t){s+='<li><img src="'+t+'"/></li>'}),o("#list ul").html(s)});var r=o("#spic"),n=o("#sf"),t=o("#bf"),s=o("#left"),d=o("#right");o("#list");n.width(r.width()*t.width()/c.width()),n.height(r.height()*t.height()/c.height());var u=c.width()/r.width();r.hover(function(){n.css("visibility","visible"),t.css("visibility","visible"),o(this).on("mousemove",function(i){var t=i.pageX-o(".goodsinfo").offset().left-n.width()/2,s=i.pageY-o(".goodsinfo").offset().top-n.height()/2;t<0?t=0:t>=r.width()-n.width()&&(t=r.width()-n.width()),s<0?s=0:s>=r.height()-n.height()&&(s=r.height()-n.height()),n.css({left:t,top:s}),c.css({left:-t*u,top:-s*u})})},function(){n.css("visibility","hidden"),t.css("visibility","hidden")}),o("#list ul").on("click","li",function(){var i=o(this).find("img").attr("src");e.attr("src",i),c.attr("src",i)});var f=6;d.on("click",function(){var i=o("#list ul li");i.size()>f&&(f++,s.css("color","#333"),i.size()==f&&d.css("color","#fff"),o("#list ul").animate({left:-(f-6)*i.eq(0).outerWidth(!0)}))}),s.on("click",function(){var i=o("#list ul li");6<f&&(f--,d.css("color","#333"),f<=6&&s.css("color","#fff"),o("#list ul").animate({left:-(f-6)*i.eq(0).outerWidth(!0)}))});var p=[],g=[];o(".p-btn a").on("click",function(){var i=o(this).parents(".goodsinfo").find("#smallpic").attr("sid");if(g=jscookie.get("cookiesid")&&jscookie.get("cookienum")?(p=jscookie.get("cookiesid").split(","),jscookie.get("cookienum").split(",")):(p=[],[]),-1!=o.inArray(i,p)){var t=parseInt(g[o.inArray(i,p)])+parseInt(o("#count").val());g[o.inArray(i,p)]=t,jscookie.add("cookienum",g,10)}else p.push(i),jscookie.add("cookiesid",p,10),g.push(o("#count").val()),jscookie.add("cookienum",g,10);alert("按钮触发了")})}(jQuery);